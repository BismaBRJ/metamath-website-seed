<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html><head><title>AsteroidMeta: metamath website issues</title><link type="text/css" rel="stylesheet" href="wiki.css" /><meta name="robots" content="INDEX,NOFOLLOW" /><link rel="alternate" type="application/rss+xml" title="AsteroidMeta" href="index.html@action=rss" /><link rel="alternate" type="application/rss+xml" title="AsteroidMeta: metamath_website_issues" href="http://planetx.cc.vt.edu/AsteroidMeta?action=rss;rcidonly=metamath_website_issues" /></head><body class="http://planetx.cc.vt.edu/AsteroidMeta"><div class="header"><span class="gotobar bar"><a class="local" href="HomePage">HomePage</a> <a class="local" href="RecentChanges">RecentChanges</a> </span><h1><a title="Click to search for references to this page" href="http://planetx.cc.vt.edu/AsteroidMeta?search=metamath+website+issues">metamath website issues</a></h1></div><div class="content browse"><p>This page can be used to discuss technical problems with the Metamath website and mirrors.</p><hr /><h1>us2.metamath.org problem</h1><p>There is a problem with us2.metamath.org: it is unavailable half of the time. And this half corresponds to the day in Europe (and consequently in Africa too). &#x2013; <a class="local" href="fl">fl</a></p><p>On Sunday 15 Jun, there was a 4-hour power outage from 09:00 to 13:00 EDT in my neighborhood due to a bad transformer. I checked the logs, and there have been no other gaps in the hourly RSS feed updates from Israel (at 00:00, 01:00,&#x2026; 23:00 +- 1 minute) for the last two weeks. So either there are Internet outages in-between those times I am unaware of, or there is some other problem between here and Europe/Africa. Perhaps you can report to me the exact time if you see an outage, and I will look at the logs to see if other activity stopped as well. &#x2013; <a class="local" href="norm">norm</a> 18 Jun 2008</p><p>Now the page is unavailable (15:10 in Paris). &#x2013; <a class="local" href="fl">fl</a></p><p>The access.log showed activity from UK (but not from France) at 15:15 Paris time = 13:15 UTC = 09:15 EDT. Is the problem that us2.metamath.org didn't respond, or that the domain name lookup failed (two different problems)? Next time this happens, could you try <a class="url" href="http://207.172.220.155:8888">http://207.172.220.155:8888</a> instead of <a class="url" href="http://us2.metamath.org:8888">http://us2.metamath.org:8888</a> and let me know what happens? Does anyone else reading this have a problem? &#x2013; <a class="local" href="norm">norm</a> 18 Jun 2008</p><p>Both are unavailable (Paris 9h17 UTC). I don't know the source of the problem maybe a domain name lookup failure. When you click on the link nothing happens. &#x2013; <a class="local" href="fl">fl</a> 19-Jun-2008</p><p>I have received another report of the problem from the Netherlands. It is not a DNS problem. The HTTP connection actually gets initialized, but then for unknown reason the TCP conversation stops. &#x2013; <a class="local" href="norm">norm</a> 19 Jun 2008</p><dl class="quote"><dt /><dd>This has only happened to me &#x2013; about &#x2013; once during the past year, and I check the website for updates once or twice each day.</dd><dt /><dd>.</dd><dt /><dd>Question: why do you use port 8888 for the US2 website? I am wondering (unlikely), perhaps, if you might try an experiment and create a clone of the homepage with port 80 and see if the problem occurs simultaneously on 8888 and 80. Other than that, I wonder if your Debian is out of date (I am sure you have covered that situation though &#x2013; mostly I am just curious about your diagnostic process. Thx.) --<a class="local" href="ocat">ocat</a> 19-Jun-2008<dl class="quote"><dt /><dd>I use port 8888 because my ISP blocks incoming port 80 for anyone who doesn't pay for a high-priced "commercial" Internet connection. As for Debian being outdated, it has worked for years without a problem, but it will eventually be something to look at.</dd></dl></dd></dl><p>Today I replaced the router with another brand. Let me know if this affects the problem. &#x2013; <a class="local" href="norm">norm</a> 19 Jun 2008 </p><dl class="quote"><dt /><dd>No it still doesn't work. Do you have some restrictions in your parameters that wouldn't allow people to connect at certain hours of the day ? Firewalls for instance do that sort of things ? Or your ISP has a new policy ? &#x2013; <a class="local" href="fl">fl</a> 20-Jun-2008<dl class="quote"><dt /><dd>There aren't any restrictions, and the firewall does not  selectively block anyone either by time of day or by IP address. As for a new ISP policy, it would be odd to filter only connections from Europe - unless one is a conspiracy theorist - although they won't help me with a server problem since I don't have a commercial account. &#x2013; <a class="local" href="norm">norm</a><dl class="quote"><dt /><dd>Definition <a class="url outside" href="http://www.thefreedictionary.com/conspiracy">"conspiracy"</a>: "An agreement to perform together an illegal, wrongful, or subversive act." I do not believe these are very rare. Quite the opposite. So theorizing about them ought to be as natural as breathing, at least for Thinkers. But in this case an unintentional malfunction is the likely cause. Still&#x2026; perhaps the conspirators' servers overload at certain times of the day :-) --<a class="local" href="ocat">ocat</a>.</dd></dl></dd></dl></dd></dl><p>For the time being, the <a class="url" href="http://gr.metamath.org">http://gr.metamath.org</a> mirror will be updated daily starting at 19:00 EST (23:00 UTC, 01:00 Paris) and usually ending before 19:30. &#x2013; <a class="local" href="norm">norm</a> 21 Jun 2008</p><dl class="quote"><dt /><dd>In a "mysterious" situation the key to resolution is gathering more evidence, which may mean conducting experiments. Inside the US my access to US2 has been solid, with only one "unavailable" situation in a year (fuzzy recollection on that.) Logically, there are three locations of the problem: user computer, server computer, and everything in the middle. Since the two reported instances of this situation in the current timeframe are European, the most suspcious culprit is "everything in the middle". I would be curious to know if us.metamath.org (US based) is unavailable at the same time that us2.metamath.org is unavailable. I wonder if the users reporting the problem use PC firewalls and can examine then report the firewall log data for problem analysis. It may be that there is some sort of filtering going on between the US and Europe which chokes sometimes on the US2..:8888 communications &#x2013; that is, the filtering is different than when US..:80 is used. There is also a possibility of "0wn3rship" of someone's computer somewhere, with attempts to do a man-in-the-middle attack &#x2013; so I wonder if the European users who are reporting the problem could attempt using a proxy &#x2013; perhaps use TOR &#x2013; to access US2 when a problem is encountered using the normal methods. --<a class="local" href="ocat">ocat</a> 21-Jun-2008<dl class="quote"><dt /><dd>The us.metamath.org volunteer could no longer offer the mirror, so now I map it to either au.metamath.org or gr.metamath.org, whichever seems to be working the most reliably. So in a sense us.metamath.org is the "most reliable" mirror, but is physically located in either Australia or Greece. As for us2, there is a Netherlands volunteer who has been able to reproduce the problem from his end and will be doing some troubleshooting over the next few days. &#x2013; <a class="local" href="norm">norm</a></dd></dl></dd></dl><p>I added ports 88 and 443, so the server now recognizes  <a class="url" href="http://us2.metamath.org:8888">http://us2.metamath.org:8888</a> and <a class="url" href="http://us2.metamath.org:88">http://us2.metamath.org:88</a> and <a class="url" href="http://us2.metamath.org:443">http://us2.metamath.org:443</a> identically. This may tell us if the problem is related to the port number. If anyone sees them behave differently, let me know. &#x2013; <a class="local" href="norm">norm</a> 21 Jun 2008</p><dl class="quote"><dt /><dd>Here are two more experiments testing the hypothesis that some ISP's are interfering with suspected transborder file-sharing activities &#x2013; anything other than port 80 accesses.<dl class="quote"><dt /><dd>It would be strange if they were selectively blocking only at  certain times of the day, since the behavior of the problem seems to depend on that.</dd></dl></dd><dt /><dd>1) As you know, the main vanilla TCP ports are 80 (http), 443 (https) and 53 (DNS). I don't expect 88 to fare better than 8888 &#x2013; both are non-80, hence non- standard. Does your ISP prevent 443 sessions? Can you provide an HTTPS session for US2? It would be interesting to see if HTTPS is blocking.<dl class="quote"><dt /><dd>Interestingly, it does seem that my ISP doesn't block 443. So I added <a class="url" href="http://us2.metamath.org:443">http://us2.metamath.org:443</a> (which is not SSL though - one thing at a time&#x2026;).</dd></dl></dd><dt /><dd>2) Provide temporary readonly login access to the US2 server on some non-critial directory, such as /ocat/mmj2. Give to <a class="local" href="fl">fl</a> and your Netherlands volunteer. If they can access login at us2.metamath.org but still cannot access the webpages via a browser then that would be <b>very</b> interesting.<dl class="quote"><dt /><dd>This has already been done behind the scenes. The NL person can get in via ssh and is doing various tcpdump, nmap, etc. things to see what's happening.</dd></dl></dd></dl><p>A quick update on what I found out in the last couple of days:</p><ul><li>Port 8888 is really being blocked when going from an NL system to us2.metamath.org: when looking on the us2 system, no 8888 packets arrive from my NL system.</li><li>That NL system does have no ISP filtering that interferes. (I know, because originally I tried from my home system, and that gave different results, because my ISP does HTTP filtering on my request&#x2013; but their DansGuardian<a class="edit" title="Click to edit this page" href="http://planetx.cc.vt.edu/AsteroidMeta?action=edit;id=DansGuardian">?</a> handles a blocked port not-so-nicely, it appears.)</li><li>What happens it that when a connection is set up (TCP SYN packet), the other side --which appears to be us2.metamath.org itself-- immediately terminates the connection (TCP RST packet). Here is the tcpdump output of one such attempt:</li></ul><pre>     23:17:36.580041 IP 10.31.104.10.60171 &gt; 207-172-220-155.c3-0.lex-ubr2.sbo-lex.ma.cable.rcn.com.8888: S 2048871615:2048871615(0) win 5840 &lt;mss 1460,sackOK,timestamp 3354877477 0,nop,wscale 2&gt;
     23:17:36.580204 IP 207-172-220-155.c3-0.lex-ubr2.sbo-lex.ma.cable.rcn.com.8888 &gt; 10.31.104.10.60171: R 0:0(0) ack 2048871616 win 5840 &lt;mss 1460,sackOK,timestamp 3354877477 0,nop,wscale 2&gt;</pre><ul><li>I have never observed any success; <a class="local" href="fl">fl</a>, could you give us approximate time spans when port 8888 <b>does</b> work for you from France? Thanks!<ul><li>I would say at week-ends and in the French evenings ( 17:00 UTC ) but my experiments are not  frequent. &#x2013; <a class="local" href="fl">fl</a></li></ul></li><li>Finally, both ports 88 and 443 do work for me, both from my NL test system and from my ISP-filtered home system. So that's at least a workaround.<ul><li>For me too ( Wednesday 12:23 UTC ) &#x2013; <a class="local" href="fl">fl</a></li></ul></li></ul><p>That's all I can find out for now, unfortunately I have no more leads to go on. We still have a mystery. I'm thinking that Norm's ISP is doing the blocking, because several routers exhibit the same problem, and the us2 box itself does not even see the 8888 packets. It could be further upstream from Norm, but that seems less likely: then other customers might also have complained about blocked ports.</p><p>So the next stop in this investigation seems to be Norm's ISP.</p><p>If anyone has more information, we'd appreciate it.</p><p>--<a class="local" href="marnix">marnix</a></p><h1>More Evidence Gathering</h1><p>In the US, Comcast has admitted interfering with P2P  by injecting packets that &#x2013; I don't know the specific details &#x2013; terminate or reset the "conversation". They claim not to "block" and that a user can eventually complete the download with perseverance. So, in the Comcast situation the problem <b>is</b> &#x2013; or is claimed to be &#x2013; intermittent. It looks like Norm's ISP is a  cable provider, and we already know that they block incoming port 80 because metamath.org is not paid for with a "commercial" fee.</p><dl class="quote"><dt /><dd>They are upfront about the fact that port 80 is blocked. It would surprise me if they are purposely and surreptitiously blocking another port, especially only from certain countries, although I suppose anything is possible. My guess is that some router in their farm is misconfigured or defective. The only thing I can think of is for people with the problem to do a "traceroute us2.metamath.org" ("tracert us2.metamath.org" on Windows from the Command Prompt) to see if there is a particular router that is always there when the problem occurs and never there when the problem doesn't occur.</dd></dl><p>So, the question is, what types of internet connections are being used with us2.metamath.org, both successful and unsuccessful? For example, my internet connection is dial-up, and I almost never have any problems accessing us2.metamath.org. Are the problems occurring only on high-speed internet connections, and what are those speeds?</p><dl class="quote"><dt /><dd>I generated a web report for us2 and put it here: <a class="url" href="http://us2.metamath.org:88/1.html">http://us2.metamath.org:88/1.html</a>. Make of it what you will. Out of these, there have only been 2 reports of this problem, one from NL and one from FR, although of course casual users aren't going to report a problem. (You may be interested that there have been 297 mmj2.zip downloads since it was added around Oct.)</dd></dl><p>I am also curious about what is the total bandwidth usage of the internet connection which us2.metamath.org consumes, including both the Metamath and any other activities &#x2013; such as foldit@home or whatever.</p><p>And is it possible that something like foldit@home is active during the same timeframe in which problems are being reported?</p><dl class="quote"><dt /><dd>At the time Marnix verified the problem from his end, I don't think there was any other activity at all going on.</dd></dl><p>Also, how many unique IP addresses use us2.metamath.org on a regular basis, not counting the occasional spikes due to slashdot, etc. It would be interesting to know what percentage of regular users are experiencing  this intermittent problem (we know that most users  never report internet problems.)</p><p>--<a class="local" href="ocat">ocat</a> 25-Jun-2008</p><p>I will keep ports 88, 443, and 8888 open indefinitely as a workaround. I made port 88 the "default" since no one has reported a problem with it yet. &#x2013; <a class="local" href="norm">norm</a> 26 Jun 2008 </p></div><div class="footer"><hr /><span class="gotobar bar"><a class="local" href="HomePage">HomePage</a> <a class="local" href="RecentChanges">RecentChanges</a> </span><span class="edit bar"><br /> <a class="edit" accesskey="e" title="Click to edit this page" href="http://planetx.cc.vt.edu/AsteroidMeta?action=edit;id=metamath_website_issues">Edit this page</a> <a class="history" href="http://planetx.cc.vt.edu/AsteroidMeta?action=history;id=metamath_website_issues">View other revisions</a> <a class="admin" href="http://planetx.cc.vt.edu/AsteroidMeta?action=admin;id=metamath_website_issues">Administration</a></span><span class="time"><br /> Last edited 2008-06-26 15:30 UTC by <a class="author" title="from 207-172-220-155.c3-0.lex-ubr2.sbo-lex.ma.cable.rcn.com" href="norm">norm</a> <a class="diff" href="http://planetx.cc.vt.edu/AsteroidMeta?action=browse;diff=1;id=metamath_website_issues">(diff)</a></span><form method="get" action="http://planetx.cc.vt.edu/AsteroidMeta" enctype="application/x-www-form-urlencoded">
<p>Search: <input type="text" name="search"  size="20" accesskey="f" /> <input type="submit" name="dosearch" value="Go!" /></p></form></div>
</body>
</html>
